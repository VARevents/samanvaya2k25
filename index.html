<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Samanvaya 2025</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Georgia", serif;
        background: linear-gradient(
          135deg,
          #e8f4f8 0%,
          #d1e9f0 50%,
          #b8dce8 100%
        );
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        position: relative;
        overflow-x: hidden;
      }

      .floral-decoration {
        position: absolute;
        opacity: 0.3;
        z-index: 1;
      }

      .floral-top-left {
        top: 20px;
        left: 20px;
        width: 150px;
        height: 150px;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path d="M50 10c-5 0-10 5-10 10 0 5 5 10 10 10s10-5 10-10c0-5-5-10-10-10zm0 30c-8 0-15 7-15 15s7 15 15 15 15-7 15-15-7-15-15-15z" fill="%23a0c4d4" opacity="0.5"/></svg>')
          no-repeat center;
        background-size: contain;
      }

      .floral-bottom-right {
        bottom: 20px;
        right: 20px;
        width: 120px;
        height: 120px;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="8" fill="%239bb8c7" opacity="0.6"/><path d="M30 50c0-5 5-10 10-10s10 5 10 10-5 10-10 10-10-5-10-10zm30 0c0-5 5-10 10-10s10 5 10 10-5 10-10 10-10-5-10-10z" fill="%23a0c4d4" opacity="0.4"/></svg>')
          no-repeat center;
        background-size: contain;
      }

      .container {
        background: rgba(255, 255, 255, 0.95);
        border-radius: 20px;
        padding: 40px 30px;
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
        text-align: center;
        max-width: 400px;
        width: 90%;
        position: relative;
        z-index: 2;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        animation: fadeInUp 0.8s ease-out;
      }

      .samanvaya-logo {
        width: 200px;
        height: 200px;
        margin: 0 auto 20px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 8px 25px rgba(26, 35, 126, 0.3);
        transition: transform 0.3s ease;
      }

      .samanvaya-logo:hover {
        transform: scale(1.05);
      }

      .samanvaya-logo img {
        width: 180px;
        height: 180px;
        border-radius: 50%;
        object-fit: cover;
      }

      .title {
        font-size: 2.5rem;
        color: #1a237e;
        margin-bottom: 8px;
        font-weight: bold;
        letter-spacing: 2px;
      }

      .year {
        font-size: 1.5rem;
        color: #666;
        margin-bottom: 30px;
        font-weight: 300;
      }

      .links-container {
        display: flex;
        flex-direction: column;
        gap: 20px;
        margin: 30px 0;
      }

      .link-button {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 15px;
        padding: 15px 25px;
        background: linear-gradient(135deg, #ff6b35 0%, #f7931e 100%);
        color: white;
        text-decoration: none;
        border-radius: 50px;
        font-size: 1.1rem;
        font-weight: 600;
        transition: all 0.3s ease;
        box-shadow: 0 5px 15px rgba(255, 107, 53, 0.3);
      }

      .link-button:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(255, 107, 53, 0.4);
      }

      .link-button.drive {
        background: linear-gradient(135deg, #4285f4 0%, #34a853 100%);
        box-shadow: 0 5px 15px rgba(66, 133, 244, 0.3);
      }

      .link-button.drive:hover {
        box-shadow: 0 8px 25px rgba(66, 133, 244, 0.4);
      }

      .link-button.squad {
        background: linear-gradient(135deg, #9c27b0 0%, #673ab7 100%);
        box-shadow: 0 5px 15px rgba(156, 39, 176, 0.3);
      }

      .link-button.squad:hover {
        box-shadow: 0 8px 25px rgba(156, 39, 176, 0.4);
      }

      .link-button.points-table:hover {
        box-shadow: 0 8px 25px rgba(255, 111, 0, 0.4);
      }

      .link-icon {
        width: 24px;
        height: 24px;
        fill: currentColor;
      }

      .var-logo-container {
        margin-top: 30px;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
      }

      .var-logo {
        height: 65px;
        width: auto;
      }

      .var-text {
        font-size: 0.9rem;
        color: #666;
        font-style: italic;
      }

      /* Winners Section */
      .winners-section {
        margin-top: 25px;
        margin-bottom: 25px;
        padding: 25px 20px;
        background: linear-gradient(
          135deg,
          rgba(138, 67, 141, 0.15),
          rgba(103, 58, 183, 0.1)
        );
        border-radius: 20px;
        border: 2px solid rgba(138, 67, 141, 0.4);
        position: relative;
        overflow: hidden;
        animation: winnersGlow 3s infinite ease-in-out;
      }

      @keyframes winnersGlow {
        0%,
        100% {
          border-color: rgba(138, 67, 141, 0.4);
          box-shadow: 0 0 20px rgba(138, 67, 141, 0.15);
        }
        50% {
          border-color: rgba(103, 58, 183, 0.6);
          box-shadow: 0 0 40px rgba(103, 58, 183, 0.3);
        }
      }

      .winners-section::before {
        content: "";
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: linear-gradient(
          45deg,
          transparent,
          rgba(138, 67, 141, 0.1),
          transparent
        );
        animation: winnersShine 3s infinite;
      }

      @keyframes winnersShine {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      .winners-header {
        position: relative;
        z-index: 1;
        margin-bottom: 20px;
      }

      .winners-title {
        font-size: 1.8rem;
        font-weight: bold;
        background: linear-gradient(135deg, #8a438d 0%, #673ab7 100%);
        background-clip: text;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        margin-bottom: 5px;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        animation: titleBounce 2s infinite ease-in-out;
      }

      @keyframes titleBounce {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-5px);
        }
      }

      .trophy-icon {
        font-size: 2rem;
        animation: trophyRotate 4s infinite ease-in-out;
      }

      @keyframes trophyRotate {
        0%,
        100% {
          transform: rotate(-10deg) scale(1);
        }
        50% {
          transform: rotate(10deg) scale(1.1);
        }
      }

      .winners-subtitle {
        font-size: 0.9rem;
        color: rgba(103, 58, 183, 0.8);
        font-style: italic;
      }

      .winners-carousel {
        position: relative;
        z-index: 1;
        width: 100%;
        height: 350px;
        border-radius: 15px;
        overflow: hidden;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        background: rgba(0, 0, 0, 0.1);
      }

      .winners-carousel-inner {
        position: relative;
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .winner-image {
        max-width: 100%;
        max-height: 100%;
        object-fit: contain;
        border-radius: 10px;
        animation: imageZoomIn 0.5s ease-out;
      }

      @keyframes imageZoomIn {
        0% {
          opacity: 0;
          transform: scale(0.8);
        }
        100% {
          opacity: 1;
          transform: scale(1);
        }
      }

      .winners-indicators {
        display: flex;
        justify-content: center;
        gap: 8px;
        margin-top: 15px;
        position: relative;
        z-index: 1;
      }

      .winner-indicator {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background: rgba(138, 67, 141, 0.3);
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .winner-indicator.active {
        background: #8a438d;
        transform: scale(1.3);
        box-shadow: 0 0 10px rgba(138, 67, 141, 0.8);
      }

      .winners-loading {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 350px;
        color: rgba(138, 67, 141, 0.8);
        font-size: 1.1rem;
      }

      .loading-spinner {
        width: 50px;
        height: 50px;
        border: 4px solid rgba(138, 67, 141, 0.2);
        border-top: 4px solid #8a438d;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin-bottom: 15px;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      /* Carousel Modal */
      .modal {
        display: none;
        position: fixed;
        z-index: 999;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.6);
        justify-content: center;
        align-items: center;
      }

      .modal-content {
        background: white;
        border-radius: 15px;
        padding: 20px;
        max-width: 90%;
        max-height: 80%;
        position: relative;
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      /* Points Table Modal */
      .points-modal-content {
        background: linear-gradient(180deg, #2a2d35 0%, #1f2128 100%);
        border-radius: 20px;
        padding: 0;
        max-width: 650px;
        width: 90%;
        position: relative;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        overflow: hidden;
      }

      .points-modal-content h2 {
        color: #d4af37;
        text-align: center;
        margin: 0;
        padding: 25px 30px;
        font-size: 1.8rem;
        font-weight: bold;
        text-transform: uppercase;
        letter-spacing: 3px;
        background: linear-gradient(135deg, #1a1c23 0%, #2d3038 100%);
        border-bottom: 3px solid #d4af37;
      }

      .close-modal {
        position: absolute;
        top: 20px;
        right: 25px;
        font-size: 32px;
        font-weight: bold;
        color: rgba(255, 255, 255, 0.6);
        cursor: pointer;
        transition: color 0.3s ease;
        z-index: 10;
      }

      .close-modal:hover {
        color: #d4af37;
      }

      .points-table-wrapper {
        padding: 30px;
      }

      .points-table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0;
      }

      .points-table thead {
        background: rgba(42, 45, 53, 0.6);
      }

      .points-table th {
        padding: 15px 12px;
        text-align: center;
        font-weight: 700;
        font-size: 0.85rem;
        text-transform: uppercase;
        letter-spacing: 1.5px;
        color: #b8b8b8;
        border-bottom: 2px solid rgba(212, 175, 55, 0.3);
      }

      .points-table th:first-child {
        text-align: center;
        width: 60px;
      }

      .points-table th:nth-child(2) {
        text-align: left;
      }

      .points-table th:last-child {
        width: 100px;
      }

      .points-table tbody tr {
        background: rgba(255, 255, 255, 0.02);
        transition: all 0.3s ease;
        border-bottom: 1px solid rgba(255, 255, 255, 0.05);
      }

      .points-table tbody tr:hover {
        background: rgba(212, 175, 55, 0.1);
        transform: translateX(5px);
      }

      .points-table tbody tr:nth-child(1) {
        background: linear-gradient(
          90deg,
          rgba(255, 215, 0, 0.15) 0%,
          rgba(255, 215, 0, 0.05) 100%
        );
        border-left: 4px solid #ffd700;
      }

      .points-table tbody tr:nth-child(2) {
        background: linear-gradient(
          90deg,
          rgba(192, 192, 192, 0.15) 0%,
          rgba(192, 192, 192, 0.05) 100%
        );
        border-left: 4px solid #c0c0c0;
      }

      .points-table tbody tr:nth-child(3) {
        background: linear-gradient(
          90deg,
          rgba(205, 127, 50, 0.15) 0%,
          rgba(205, 127, 50, 0.05) 100%
        );
        border-left: 4px solid #cd7f32;
      }

      .points-table td {
        padding: 18px 12px;
        color: #e8e8e8;
        font-size: 1rem;
        font-weight: 500;
      }

      .rank-cell {
        font-weight: bold;
        font-size: 1.2rem;
        color: #d4af37;
        text-align: center !important;
        width: 60px;
      }

      .team-name-cell {
        font-weight: 600;
        font-size: 1.05rem;
        text-align: left !important;
        color: #ffffff;
        padding-left: 15px !important;
      }

      .score-cell {
        font-weight: bold;
        font-size: 1.4rem;
        color: #ffd700;
        text-align: center;
        text-shadow: 0 2px 4px rgba(255, 215, 0, 0.3);
      }

      .loading-spinner {
        text-align: center;
        padding: 60px 40px;
        color: #b8b8b8;
        font-size: 1.1rem;
      }

      .error-message {
        text-align: center;
        padding: 60px 40px;
        color: #ff6b6b;
        font-size: 1.1rem;
      }

      .carousel-container {
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .carousel-image {
        max-width: 100%;
        max-height: 60vh;
        border-radius: 10px;
        object-fit: contain;
      }

      .carousel-controls {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        display: flex;
        justify-content: space-between;
        width: 100%;
        padding: 0 5px;
        pointer-events: none;
      }

      .carousel-btn {
        background: transparent;
        color: rgba(255, 255, 255, 0.8);
        border: none;
        width: 35px;
        height: 35px;
        cursor: pointer;
        font-size: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
        pointer-events: auto;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
      }

      .carousel-btn:hover {
        color: rgba(255, 255, 255, 1);
        transform: scale(1.2);
        text-shadow: 2px 2px 6px rgba(0, 0, 0, 0.7);
      }

      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* Mobile Responsive */
      @media (max-width: 480px) {
        .container {
          padding: 30px 20px;
        }

        .samanvaya-logo {
          width: 150px;
          height: 150px;
        }

        .samanvaya-logo img {
          width: 130px;
          height: 130px;
        }

        .title {
          font-size: 2rem;
        }

        .year {
          font-size: 1.2rem;
        }

        .link-button {
          padding: 12px 20px;
          font-size: 1rem;
        }

        .points-modal-content {
          width: 95%;
          max-width: 95%;
        }

        .points-modal-content h2 {
          font-size: 1.3rem;
          padding: 20px 15px;
          letter-spacing: 2px;
        }

        .points-table-wrapper {
          padding: 20px 15px;
        }

        .points-table th {
          padding: 12px 8px;
          font-size: 0.75rem;
          letter-spacing: 1px;
        }

        .points-table td {
          padding: 14px 8px;
          font-size: 0.9rem;
        }

        .rank-cell {
          font-size: 1rem;
          width: 45px;
        }

        .team-name-cell {
          font-size: 0.9rem;
        }

        .score-cell {
          font-size: 1.2rem;
        }

        .close-modal {
          top: 15px;
          right: 15px;
          font-size: 28px;
        }

        /* Winners Section - Mobile */
        .winners-section {
          margin-top: 20px;
          margin-bottom: 20px;
          padding: 20px 15px;
        }

        .winners-title {
          font-size: 1.5rem;
        }

        .trophy-icon {
          font-size: 1.5rem;
        }

        .winners-subtitle {
          font-size: 0.8rem;
        }

        .winners-carousel {
          height: 280px;
        }

        .winners-loading {
          height: 280px;
        }
      }
    </style>
  </head>
  <body>
    <div class="floral-decoration floral-top-left"></div>
    <div class="floral-decoration floral-bottom-right"></div>

    <div class="container">
      <div class="samanvaya-logo">
        <img src="rangoli.jpeg" alt="Samanvaya 2025 Logo" />
      </div>

      <h1 class="title" style="font-family: 'Times New Roman', Times, serif">
        SAMANVAYA
      </h1>
      <p class="year">2025</p>

      <!-- Winners Section -->
      <div class="winners-section">
        <div class="winners-header">
          <div class="winners-title">
            <span class="trophy-icon">🏆</span>
            <span>Winners Gallery</span>
            <span class="trophy-icon">🏆</span>
          </div>
          <div class="winners-subtitle">Celebrating Excellence</div>
        </div>

        <div class="winners-carousel" id="winnersCarousel">
          <div class="winners-loading" id="winnersLoading">
            <div class="loading-spinner"></div>
            <div>Loading Winners...</div>
          </div>
          <div
            class="winners-carousel-inner"
            id="winnersCarouselInner"
            style="display: none"
          >
            <img src="" alt="Winner" class="winner-image" id="winnerImage" />
          </div>
        </div>

        <div class="winners-indicators" id="winnersIndicators"></div>
      </div>

      <div class="links-container">
        <a href="#" class="link-button youtube" id="youtube-link">
          <svg class="link-icon" viewBox="0 0 24 24">
            <path
              d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"
            />
          </svg>
          YouTube
        </a>

        <a href="#" class="link-button drive" id="drive-link">
          <svg class="link-icon" viewBox="0 0 24 24">
            <path
              fill="currentColor"
              d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"
            />
          </svg>
          Photos &amp; Videos
        </a>

        <!-- New Squad Directory Button -->
        <a
          href="#"
          class="link-button squad"
          id="squad-btn"
          style="
            background: linear-gradient(135deg, #82438d 0%, #89878c 100%);
            box-shadow: 0 5px 15px rgba(156, 39, 176, 0.3);
          "
        >
          <svg class="link-icon" viewBox="0 0 24 24">
            <path
              d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5s-3 1.34-3 3 1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05C17.16 13.36 19 14.28 19 15.5V19h5v-2.5c0-2.33-4.67-3.5-7-3.5z"
            />
          </svg>
          Squad Directory
        </a>

        <!-- Kuber Daan Entries Button -->
        <a
          href="https://forms.gle/r6qhRGAZkntU8EQX7"
          class="link-button"
          id="kuber-daan-btn"
          target="_blank"
          style="
            background: linear-gradient(135deg, #ffd700 0%, #ffb347 100%);
            box-shadow: 0 5px 15px rgba(255, 215, 0, 0.3);
            color: #1a237e;
          "
        >
          <svg class="link-icon" viewBox="0 0 24 24">
            <path
              d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"
            />
          </svg>
          Kuber Daan Entries
        </a>

        <!-- Points Table Button -->
        <a
          href="#"
          class="link-button points-table"
          id="points-table-btn"
          style="
            background: linear-gradient(135deg, #5c6462 0%, #0a1e6fab 100%);
            box-shadow: 0 5px 15px rgba(0, 191, 174, 0.3);
          "
        >
          <svg class="link-icon" viewBox="0 0 24 24">
            <path
              d="M3,3H21V21H3V3M5,5V19H19V5H5M7,7H17V9H7V7M7,11H17V13H7V11M7,15H17V17H7V15Z"
            />
          </svg>
          Points Table
        </a>
      </div>

      <img src="varlogo.png" alt="VAR Logo" class="var-logo" />
      <br />
      <span class="var-text">The VAR Samiti</span>
    </div>

    <!-- Carousel Modal -->
    <div class="modal" id="carouselModal">
      <div class="modal-content">
        <div class="carousel-container">
          <img
            src="Team_List/1.png"
            id="carouselImage"
            class="carousel-image"
            alt="Team Member"
          />
          <div class="carousel-controls">
            <button class="carousel-btn" id="prevBtn">&#10094;</button>
            <button class="carousel-btn" id="nextBtn">&#10095;</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Points Table Modal -->
    <div class="modal" id="pointsModal">
      <div class="points-modal-content">
        <span class="close-modal" id="closePointsModal">&times;</span>
        <h2>🏆 Points Table 🏆</h2>
        <div id="pointsTableContainer">
          <div class="loading-spinner">Loading scores...</div>
        </div>
      </div>
    </div>

    <script>
      // YouTube and Drive Links
      document
        .getElementById("youtube-link")
        .addEventListener("click", function (e) {
          e.preventDefault();
          window.open("https://www.youtube.com/@samanvaya2025", "_blank");
        });

      document
        .getElementById("drive-link")
        .addEventListener("click", function (e) {
          e.preventDefault();
          window.open(
            "https://drive.google.com/drive/folders/1ifh2hKQ9sPLBgp85l6LJ4pTod2V1ME2I",
            "_blank"
          );
        });

      // Carousel Modal Logic
      const modal = document.getElementById("carouselModal");
      const carouselImage = document.getElementById("carouselImage");
      const images = [
        "Team_List/1.png",
        "Team_List/2.png",
        "Team_List/3.png",
        "Team_List/4.png",
      ];
      let currentIndex = 0;

      // Touch/swipe variables
      let startX = 0;
      let startY = 0;
      let isDragging = false;

      // Function to go to next image
      function nextImage() {
        currentIndex = (currentIndex + 1) % images.length;
        carouselImage.src = images[currentIndex];
      }

      // Function to go to previous image
      function prevImage() {
        currentIndex = (currentIndex - 1 + images.length) % images.length;
        carouselImage.src = images[currentIndex];
      }

      document.getElementById("squad-btn").addEventListener("click", (e) => {
        e.preventDefault();
        modal.style.display = "flex";
        carouselImage.src = images[currentIndex];
      });

      document.getElementById("nextBtn").addEventListener("click", nextImage);
      document.getElementById("prevBtn").addEventListener("click", prevImage);

      // Touch events for swipe functionality
      carouselImage.addEventListener("touchstart", (e) => {
        startX = e.touches[0].clientX;
        startY = e.touches[0].clientY;
        isDragging = true;
      });

      carouselImage.addEventListener("touchmove", (e) => {
        if (!isDragging) return;
        e.preventDefault(); // Prevent scrolling
      });

      carouselImage.addEventListener("touchend", (e) => {
        if (!isDragging) return;
        isDragging = false;

        const endX = e.changedTouches[0].clientX;
        const endY = e.changedTouches[0].clientY;
        const deltaX = endX - startX;
        const deltaY = endY - startY;

        // Check if it's a horizontal swipe (more horizontal than vertical movement)
        if (Math.abs(deltaX) > Math.abs(deltaY) && Math.abs(deltaX) > 50) {
          if (deltaX > 0) {
            // Swipe right - go to previous image
            prevImage();
          } else {
            // Swipe left - go to next image
            nextImage();
          }
        }
      });

      // Mouse events for desktop swipe functionality
      carouselImage.addEventListener("mousedown", (e) => {
        startX = e.clientX;
        startY = e.clientY;
        isDragging = true;
        carouselImage.style.cursor = "grabbing";
      });

      carouselImage.addEventListener("mousemove", (e) => {
        if (!isDragging) return;
        e.preventDefault();
      });

      carouselImage.addEventListener("mouseup", (e) => {
        if (!isDragging) return;
        isDragging = false;
        carouselImage.style.cursor = "grab";

        const endX = e.clientX;
        const endY = e.clientY;
        const deltaX = endX - startX;
        const deltaY = endY - startY;

        // Check if it's a horizontal swipe
        if (Math.abs(deltaX) > Math.abs(deltaY) && Math.abs(deltaX) > 50) {
          if (deltaX > 0) {
            // Swipe right - go to previous image
            prevImage();
          } else {
            // Swipe left - go to next image
            nextImage();
          }
        }
      });

      carouselImage.addEventListener("mouseleave", () => {
        isDragging = false;
        carouselImage.style.cursor = "grab";
      });

      // Set initial cursor style
      carouselImage.style.cursor = "grab";
      carouselImage.style.userSelect = "none";

      // Close modal on outside click
      window.addEventListener("click", (e) => {
        if (e.target === modal) modal.style.display = "none";
      });

      // Points Table Modal Logic
      const pointsModal = document.getElementById("pointsModal");
      const pointsTableContainer = document.getElementById(
        "pointsTableContainer"
      );

      // For now, using local data. You can replace this with Google Sheets API later
      const teamsData = [
        { name: "C. N. R. Rao", score: 0 },
        { name: "Sir M. Visvesvaraya", score: 0 },
        { name: "Homi J. Bhabha", score: 0 },
        { name: "Satish Dhawan", score: 0 },
      ];

      // Function to fetch scores from Google Sheets
      // Replace SHEET_ID and API_KEY with your actual values
      async function fetchScores() {
        try {
          // Option 1: Using Google Sheets API (you'll need to set this up)
          // const SHEET_ID = 'YOUR_GOOGLE_SHEET_ID';
          // const API_KEY = 'YOUR_API_KEY';
          // const range = 'Sheet1!A2:B5'; // Adjust range as needed
          // const url = `https://sheets.googleapis.com/v4/spreadsheets/${SHEET_ID}/values/${range}?key=${API_KEY}`;

          // const response = await fetch(url);
          // const data = await response.json();
          // const teams = data.values.map(row => ({
          //   name: row[0],
          //   score: parseInt(row[1]) || 0
          // }));

          // Option 2: Using published Google Sheets as CSV (easier, no API key needed)
          // Instructions: File > Share > Publish to web > Choose CSV format
          const SHEET_CSV_URL =
            "https://docs.google.com/spreadsheets/d/e/2PACX-1vTcich9HIn7YCt7-KPoD23hedBx6YxO_HUBa1rF3uWL94k9jHDGm9wmNO7ZjCMxBUoCiqIRDFMUmBqd/pub?gid=0&single=true&output=csv";
          const response = await fetch(SHEET_CSV_URL);
          const csvText = await response.text();
          const lines = csvText.trim().split("\n");
          const teams = lines.slice(1).map((line) => {
            const [name, score] = line.split(",");
            return { name: name.trim(), score: parseInt(score) || 0 };
          });

          // For now, return local data (you can update these values manually in the code)
          // Or follow the instructions below to use Google Sheets
          // const teams = teamsData;

          return teams;
        } catch (error) {
          console.error("Error fetching scores:", error);
          throw error;
        }
      }

      // Function to render the points table
      function renderPointsTable(teams) {
        // Sort teams by score in descending order
        teams.sort((a, b) => b.score - a.score);

        let tableHTML = `
          <div class="points-table-wrapper">
            <table class="points-table">
              <thead>
                <tr>
                  <th>Ranking</th>
                  <th>Team</th>
                  <th>Points</th>
                </tr>
              </thead>
              <tbody>
        `;

        teams.forEach((team, index) => {
          tableHTML += `
            <tr>
              <td class="rank-cell">${index + 1}</td>
              <td class="team-name-cell">${team.name}</td>
              <td class="score-cell">${team.score}</td>
            </tr>
          `;
        });

        tableHTML += `
              </tbody>
            </table>
          </div>
        `;

        pointsTableContainer.innerHTML = tableHTML;
      }

      // Open points table modal
      document
        .getElementById("points-table-btn")
        .addEventListener("click", async (e) => {
          e.preventDefault();
          pointsModal.style.display = "flex";
          pointsTableContainer.innerHTML =
            '<div class="loading-spinner">Loading scores...</div>';

          try {
            const teams = await fetchScores();
            renderPointsTable(teams);
          } catch (error) {
            pointsTableContainer.innerHTML =
              '<div class="error-message">Failed to load scores. Please try again later.</div>';
          }
        });

      // Close points modal
      document
        .getElementById("closePointsModal")
        .addEventListener("click", () => {
          pointsModal.style.display = "none";
        });

      // Close modal on outside click
      window.addEventListener("click", (e) => {
        if (e.target === pointsModal) pointsModal.style.display = "none";
      });

      // Winners Carousel Logic
      const winnersCarousel = document.getElementById("winnersCarousel");
      const winnersLoading = document.getElementById("winnersLoading");
      const winnersCarouselInner = document.getElementById(
        "winnersCarouselInner"
      );
      const winnerImage = document.getElementById("winnerImage");
      const winnersIndicators = document.getElementById("winnersIndicators");

      // ============================================
      // 🏆 WINNERS GALLERY - FULLY AUTOMATED
      // ============================================
      // ✨ Just add/delete images in Google Drive - they appear automatically!
      //
      // SETUP REQUIRED (ONE-TIME):
      // 1. Get your Google Drive folder ID (from folder URL)
      // 2. Create a Google API Key (see guide below)
      // 3. Set folder sharing to "Anyone with the link"
      // 4. Add IDs below and deploy ONCE
      // 5. From then on: Just manage images in Drive! 🎉

      // ========================================
      // 📁 YOUR GOOGLE DRIVE FOLDER ID
      // ========================================
      // These values are injected from GitHub Secrets during deployment
      // To update: Go to GitHub Repo → Settings → Secrets and variables → Actions

      const WINNERS_DRIVE_FOLDER_ID = "REPLACE_WITH_DRIVE_FOLDER_ID";

      // ========================================
      // 🔑 YOUR GOOGLE API KEY
      // ========================================
      // This is injected securely from GitHub Secrets during deployment
      // Never commit your actual API key to the repository!

      const GOOGLE_API_KEY = "REPLACE_WITH_GOOGLE_API_KEY";

      // Array to store winner image URLs
      let winnerImages = [];
      let currentWinnerIndex = 0;
      let winnerAutoplayInterval;

      // Fetch images from Google Drive folder - AUTOMATED METHOD
      async function fetchDriveImages() {
        try {
          // Build the API URL to fetch all images from the folder
          const query = `'${WINNERS_DRIVE_FOLDER_ID}' in parents and mimeType contains 'image/' and trashed=false`;
          const fields = "files(id,name,mimeType,createdTime)";
          const url = `https://www.googleapis.com/drive/v3/files?q=${encodeURIComponent(
            query
          )}&key=${GOOGLE_API_KEY}&fields=${fields}&orderBy=createdTime desc`;

          const response = await fetch(url);

          if (!response.ok) {
            const errorData = await response.json().catch(() => ({}));
            console.error("Google Drive API Error:", errorData);

            if (response.status === 403) {
              throw new Error("API Key invalid or Drive API not enabled");
            } else if (response.status === 404) {
              throw new Error("Folder not found or not accessible");
            } else {
              throw new Error(`API request failed: ${response.status}`);
            }
          }

          const data = await response.json();

          if (!data.files || data.files.length === 0) {
            return [];
          }

          // Convert to direct image URLs with fallback options
          const images = data.files.map((file) => {
            return {
              url: `https://drive.google.com/thumbnail?id=${file.id}&sz=w1000`,
              embedUrl: `https://lh3.googleusercontent.com/d/${file.id}`,
              driveUrl: `https://drive.google.com/uc?export=download&id=${file.id}`,
              viewUrl: `https://drive.google.com/uc?export=view&id=${file.id}`,
              name: file.name,
              id: file.id,
            };
          });

          return images;
        } catch (error) {
          console.error("❌ Error fetching Drive images:", error.message);
          throw error; // Don't fall back, show proper error
        }
      }

      // Initialize winners carousel
      async function initWinnersCarousel() {
        try {
          // Check if API key is configured (skip this check since key is already set)
          if (GOOGLE_API_KEY === "YOUR_API_KEY_HERE" || !GOOGLE_API_KEY) {
            winnersLoading.innerHTML = `
              <div style="text-align: center; padding: 20px; color: rgba(255, 215, 0, 0.7); line-height: 1.6;">
                <div style="font-size: 2rem; margin-bottom: 10px;">🔑</div>
                <div style="font-weight: bold; margin-bottom: 10px;">Setup Required</div>
                <div style="font-size: 0.9rem; color: rgba(255, 215, 0, 0.6);">
                  Please add your Google API Key in the code<br>
                  (See line ~1230 in index.html)
                </div>
                <div style="font-size: 0.8rem; margin-top: 15px; color: rgba(255, 215, 0, 0.5);">
                  📚 Check AUTOMATED_SETUP_GUIDE.md for instructions
                </div>
              </div>
            `;
            return;
          }

          // Fetch images from Drive
          const images = await fetchDriveImages();

          if (images.length === 0) {
            winnersLoading.innerHTML = `
              <div style="text-align: center; padding: 20px; color: rgba(255, 215, 0, 0.6); line-height: 1.6;">
                <div style="font-size: 2rem; margin-bottom: 10px;">📁</div>
                <div style="font-weight: bold; margin-bottom: 5px;">No images found</div>
                <div style="font-size: 0.85rem; margin-top: 10px; color: rgba(255, 215, 0, 0.5);">
                  Add images to your Google Drive folder<br>
                  Folder ID: ${WINNERS_DRIVE_FOLDER_ID.substring(0, 20)}...
                </div>
                <div style="font-size: 0.75rem; margin-top: 10px; color: rgba(255, 215, 0, 0.4);">
                  Make sure folder is shared as "Anyone with the link"
                </div>
              </div>
            `;
            return;
          }

          winnerImages = images;

          // Hide loading, show carousel
          winnersLoading.style.display = "none";
          winnersCarouselInner.style.display = "flex";

          // Create indicators
          winnersIndicators.innerHTML = "";
          winnerImages.forEach((_, index) => {
            const indicator = document.createElement("div");
            indicator.className = "winner-indicator";
            if (index === 0) indicator.classList.add("active");
            indicator.addEventListener("click", () => goToWinner(index));
            winnersIndicators.appendChild(indicator);
          });

          // Show first image
          showWinner(0);

          // Start autoplay
          startWinnerAutoplay();
        } catch (error) {
          console.error("Error loading winners:", error);
          winnersLoading.innerHTML = `
            <div style="text-align: center; padding: 20px; color: rgba(255, 107, 53, 0.8);">
              <div style="font-size: 2rem; margin-bottom: 10px;">⚠️</div>
              <div style="font-weight: bold;">Failed to load images</div>
              <div style="font-size: 0.85rem; margin-top: 10px; color: rgba(255, 107, 53, 0.6);">
                ${error.message}
              </div>
            </div>
          `;
        }
      }

      // Show specific winner with fallback URLs
      function showWinner(index) {
        currentWinnerIndex = index;
        const imageData = winnerImages[index];

        // Clear previous image
        winnerImage.src = "";
        winnerImage.alt = "Loading...";

        // Try multiple URL formats in order
        const urlsToTry = [
          imageData?.url, // Primary (thumbnail - most reliable)
          imageData?.embedUrl, // Fallback 1
          imageData?.driveUrl, // Fallback 2
          imageData?.viewUrl, // Fallback 3
          imageData, // Fallback 4 (if it's just a string)
        ].filter(Boolean);

        let currentUrlIndex = 0;

        function tryNextUrl() {
          if (currentUrlIndex >= urlsToTry.length) {
            // Show error placeholder
            winnerImage.src =
              'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="800" height="600" viewBox="0 0 800 600"><rect width="800" height="600" fill="%230a0e27"/><circle cx="400" cy="250" r="60" fill="none" stroke="%23ffd700" stroke-width="3"/><line x1="370" y1="220" x2="370" y2="260" stroke="%23ffd700" stroke-width="3"/><line x1="430" y1="220" x2="430" y2="260" stroke="%23ffd700" stroke-width="3"/><path d="M 340 310 Q 400 340 460 310" fill="none" stroke="%23ffd700" stroke-width="3"/><text x="400" y="400" font-family="Arial" font-size="24" fill="%23ffd700" text-anchor="middle">Image Not Available</text><text x="400" y="440" font-family="Arial" font-size="16" fill="rgba(255,215,0,0.6)" text-anchor="middle">Check sharing permissions</text></svg>';
            winnerImage.alt = "Failed to load winner image";
            return;
          }

          const currentUrl = urlsToTry[currentUrlIndex];
          const testImg = new Image();

          testImg.onload = () => {
            winnerImage.src = currentUrl;
            winnerImage.alt = imageData?.name || `Winner ${index + 1}`;
          };

          testImg.onerror = () => {
            currentUrlIndex++;
            setTimeout(tryNextUrl, 100);
          };

          testImg.src = currentUrl;
        }

        // Start trying URLs
        tryNextUrl();

        // Update indicators
        document
          .querySelectorAll(".winner-indicator")
          .forEach((indicator, i) => {
            indicator.classList.toggle("active", i === index);
          });

        // Re-trigger animation
        winnerImage.style.animation = "none";
        setTimeout(() => {
          winnerImage.style.animation = "imageZoomIn 0.5s ease-out";
        }, 10);
      }

      // Go to specific winner
      function goToWinner(index) {
        showWinner(index);
        resetWinnerAutoplay();
      }

      // Next winner
      function nextWinner() {
        const nextIndex = (currentWinnerIndex + 1) % winnerImages.length;
        showWinner(nextIndex);
      }

      // Previous winner
      function prevWinner() {
        const prevIndex =
          (currentWinnerIndex - 1 + winnerImages.length) % winnerImages.length;
        showWinner(prevIndex);
      }

      // Start autoplay
      function startWinnerAutoplay() {
        winnerAutoplayInterval = setInterval(nextWinner, 4000); // Change image every 4 seconds
      }

      // Reset autoplay
      function resetWinnerAutoplay() {
        clearInterval(winnerAutoplayInterval);
        startWinnerAutoplay();
      }

      // Touch swipe for winners carousel
      let winnerStartX = 0;
      let winnerIsDragging = false;

      winnersCarousel.addEventListener("touchstart", (e) => {
        winnerStartX = e.touches[0].clientX;
        winnerIsDragging = true;
      });

      winnersCarousel.addEventListener("touchend", (e) => {
        if (!winnerIsDragging) return;
        winnerIsDragging = false;

        const endX = e.changedTouches[0].clientX;
        const deltaX = endX - winnerStartX;

        if (Math.abs(deltaX) > 50) {
          if (deltaX > 0) {
            prevWinner();
          } else {
            nextWinner();
          }
          resetWinnerAutoplay();
        }
      });

      // Pause autoplay on hover (desktop)
      winnersCarousel.addEventListener("mouseenter", () => {
        clearInterval(winnerAutoplayInterval);
      });

      winnersCarousel.addEventListener("mouseleave", () => {
        startWinnerAutoplay();
      });

      // Initialize winners carousel on page load
      setTimeout(() => {
        initWinnersCarousel();
      }, 500);
    </script>
  </body>
</html>
